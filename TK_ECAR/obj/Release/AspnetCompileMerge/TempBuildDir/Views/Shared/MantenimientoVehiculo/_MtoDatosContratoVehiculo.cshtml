@using resourceView = TK_ECAR.Content.resources
@model DatosContratoModel

@Html.HiddenFor(model => model.Baja)
@Html.HiddenFor(model => model.IDTipoLiquidacion)

<div class="col-md-6">
    <div class="notice notice-Lightgreen">
        <div class="form-group">
            @Html.RequiredLabelFor(model => model.NumContrato, new { @class = "control-label col-md-4" })
            <div class="col-md-8">
                @Html.TextBoxFor(model => model.NumContrato, new { @class = "form-control", @puedeDeshabilitarse = "SI" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.FechaAlta, new { @class = "control-label col-md-4" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.FechaAlta)
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Cuotas, new { @class = "control-label col-md-4" })
            <div class="col-md-2">
                @Html.TextBoxFor(model => model.Cuotas, new { @class = "form-control", @puedeDeshabilitarse = "SI" })
            </div>
        </div>




        <div class="form-group">
            @Html.LabelFor(model => model.FechaFinalizacion, new { @class = "control-label col-md-4" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.FechaFinalizacion)
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Baja, new { @class = "control-label col-md-4" })
            <div class="material-switch pull-right col-sm-8">
                <input id="dadoDeBaja" name="dadoDeBaja" type="checkbox" puedeDeshabilitarse = "SI"/>
                <label for="dadoDeBaja" class="label-primary"></label> @*label-default, label-primary, label-success, label-info, label-warning, label-danger*@
                <span class="ValorDadoDeBaja">
                    NO
                </span>
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.FechaBaja, new { @class = "control-label col-md-4" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.FechaBaja)
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.FechaDevolucion, new { @class = "control-label col-md-4" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.FechaDevolucion)
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.FechaMatriculacion, new { @class = "control-label col-md-4" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.FechaMatriculacion)
            </div>
        </div>    
        <div class="form-group">
            @Html.LabelFor(model => model.FechaRecogida, new { @class = "control-label col-md-4" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.FechaRecogida)
            </div>
        </div>
    </div>
</div>
<div class="col-md-6">
    <div class="notice notice-Lightgreen">
        <div class="form-group">
            @Html.LabelFor(model => model.TipoLiquidacion, new { @class = "control-label col-md-4" })
            <div class="col-md-8">
                @Html.EditorFor(model => model.TipoLiquidacion)
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.KMTotales, new { @class = "control-label col-md-4" })
            <div class="col-md-4">
                @Html.TextBoxFor(model => model.KMTotales, new { @class = "form-control", @marca = "EsInt", @puedeDeshabilitarse = "SI" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.ExcesoAjuste, new { @class = "control-label col-md-4" })
            <div class="col-md-4">
                @Html.TextBoxFor(model => model.ExcesoAjuste, new { @class = "form-control", @marca = "EsInt", @puedeDeshabilitarse = "SI" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.CoefExceso, new { @class = "control-label col-md-4" })
            <div class="col-md-4">
                @Html.TextBoxFor(model => model.CoefExceso, new { @class = "form-control", @marca = "EsInt", @puedeDeshabilitarse = "SI" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.KMExentos, new { @class = "control-label col-md-4" })
            <div class="col-md-4">
                @Html.TextBoxFor(model => model.KMExentos, new { @class = "form-control", @marca = "EsInt", @puedeDeshabilitarse = "SI" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Abono, new { @class = "control-label col-md-4" })
            <div class="col-md-4">
                @Html.TextBoxFor(model => model.Abono, new { @class = "form-control", @marca = "EsDouble", @puedeDeshabilitarse = "SI" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Cargo, new { @class = "control-label col-md-4" })
            <div class="col-md-4">
                @Html.TextBoxFor(model => model.Cargo, new { @class = "form-control", @marca = "EsDouble", @puedeDeshabilitarse = "SI" })
            </div>
        </div>
    </div>

</div>

@*<div class="col-md-12">
    <div class="form-group">
        <div class="col-sm-12" style="height: 30px; margin-top: -20px;">
            <h4 style="margin-left: 30%; text-decoration:underline; color: #00a0f5;">@resourceView.TK_ECAR_Resource.titleDatosImportacion</h4>
        </div>
    </div>*@
<div class="col-sm-12" style="margin-top: 3px; float: left;">
    <h4 style="margin-left: 2%; text-decoration:underline; color: #00a0f5;">@resourceView.TK_ECAR_Resource.titleDatosEntrega</h4>
</div>
<div class="col-md-6">
    <div class="notice notice-info">
        <div class="form-group">
            @Html.LabelFor(model => model.FechaPrevistaEntrega, new { @class = "control-label col-md-4" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.FechaPrevistaEntrega)
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.LugarEntrega, new { @class = "control-label col-md-4" })
            <div class="col-md-8">
                @Html.TextAreaFor(model => model.LugarEntrega, new { @class = "form-control" })
            </div>
        </div>
    </div>    
</div>
<div class="col-md-6">
    <div class="notice notice-info">
        <div class="form-group">
            @Html.LabelFor(model => model.PrioridadEntrega, new { @class = "control-label col-md-4" })
            <div class="col-md-8">
                @Html.TextBoxFor(model => model.PrioridadEntrega, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Responsable, new { @class = "control-label col-md-4" })
            <div class="col-md-8">
                @Html.TextBoxFor(model => model.Responsable, new { @class = "form-control" })
            </div>
        </div>
    </div>
</div>
@*</div>*@


<script type="text/javascript">

    $(document).ready(function () {
        if ($('#Baja').val() == true) {
            $("#dadoDeBaja").prop('checked', true);
        }
        PonerBajaSiNo();
    });

    $("#dadoDeBaja").click(function () {
        PonerBajaSiNo();
    });


    function PonerBajaSiNo() {
        if ($("#dadoDeBaja").is(':checked')) {
            jQuery(".ValorDadoDeBaja").html('@resourceView.TK_ECAR_Resource.ValorYES');
            $('#Baja').val(true);
        }
        else {
            jQuery(".ValorDadoDeBaja").html('@resourceView.TK_ECAR_Resource.ValorNO');
            $('#Baja').val(false);
        }
    }

    $('#FechaAlta').datepicker().on('changeDate', function (ev) {
        CalculaFechaFinalizacion();
    });

    $("#Cuotas").blur(function () {
        CalculaFechaFinalizacion();
    });

    function CalculaFechaFinalizacion() {
        var cuotas = $("#Cuotas").val();

        if ($.isNumeric(cuotas) && isValidDate("#FechaAlta", "dd/MM/yyyy")) {
            var fechaFinalizacion = convertToDate("#FechaAlta");
            fechaFinalizacion.setMonth((fechaFinalizacion.getMonth() + 1) + (parseInt(cuotas - 1)));
            $("#FechaFinalizacion").val(fechaFinalizacion.getDate() + "/" + (fechaFinalizacion.getMonth() + 1) + "/" + fechaFinalizacion.getFullYear());
            if (!isValidDate("#FechaFinalizacion", "dd/MM/yyyy")) {
                fechaFinalizacion = new Date(fechaFinalizacion.getFullYear(), fechaFinalizacion.getMonth() + 1, 0);
                $("#FechaFinalizacion").val(fechaFinalizacion.getDate() + "/" + (fechaFinalizacion.getMonth() + 1) + "/" + fechaFinalizacion.getFullYear());
            }
        }
        else
        {
            $("#FechaFinalizacion").val('');
        }
    }




    //$("#Fecha").datepicker({
    //    format: "dd/mm/yyyy",
    //    autoclose: true,
    //    orientation: "bottom auto"
    //});



</script>