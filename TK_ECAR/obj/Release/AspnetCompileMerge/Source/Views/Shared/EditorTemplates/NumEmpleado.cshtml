@using resourceView = TK_ECAR.Content.resources.TK_ECAR_Resource

@Html.Hidden(ViewData.TemplateInfo.FormattedModelValue.ToString())
<select id="miNumEmpleado" title="Seleccionar un empleado" search class="form-control">
    <option></option>
</select> 
<style type="text/css">
    #miNumEmpleado_chosen {
        width: 100% !important;
        display: block;
    }
</style>
 <script type="text/javascript">

     $('#miNumEmpleado').prepend($('<option></option>').html('@resourceView.msgCargando'));
     $("#miNumEmpleado").ajaxChosen({
         type: 'GET',
         url: '@Url.Action("GetEmpleados", "Home")',
         async: true,
         beforeSend: function (data, textStatus, jqXHR) {
             $("#miNumEmpleado_chosen span").addClass('loading-Chosen')
         },
         complete: function (data, textStatus, jqXHR) {
             $("#miNumEmpleado_chosen span").removeClass('loading-Chosen');
         },
         minTermLength: 0,
         dataType: 'json'
     }, function (data) {
         //var terms = [];
         var results = [];
         $.each(data, function (i, val) {

            // terms[i] = val;
             results.push({ value: val, text: val });
         });
         return results;

     },


        {
            //options
            disable_search_threshold: -1
        });

     $('#miNumEmpleado').on('change', function () {
         //alert(this.value); // or $(this).val()
         $('#NumEmpleado').val(this.value);
     });
</script>